import{a as p}from"./chunk-TS4P6BQH.js";import"./chunk-3ZVB3ZUX.js";import{a as g}from"./chunk-BTARRRLM.js";import{V as D,a as n}from"./chunk-JWR2H664.js";import{Ha as o,Lb as t,Ma as r,fb as i}from"./chunk-4VR2QSN3.js";import{a as d,b as c,h as y}from"./chunk-DV6QXP24.js";var B=y(D());var u={title:"Jwt",mdFile:"./index.md",category:g,demos:{}},s=u;var k=[];var E={},h=E;var f=`<p class="ngde"><img src="https://deno.bundlejs.com/badge?q=ngx-oneforall/services/jwt&#x26;treeshake=%5B*%5D&#x26;config=%7B%22esbuild%22:%7B%22external%22:%5B%22rxjs%22,%22@angular/core%22,%22@angular/common%22,%22@angular/forms%22,%22@angular/router%22%5D%7D%7D" alt="Bundle Size" class="ngde"></p><p class="ngde">Decode, validate, and extract claims from JSON Web Tokens (JWTs) with a configurable token source.</p><h2 id="features" href="services/jwt" headinglink="true" class="ngde">Features<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="features"></ng-doc-heading-anchor></h2><ul class="ngde"><li class="ngde"><strong class="ngde">Decode JWT</strong> \u2014 Extract header and payload without verification</li><li class="ngde"><strong class="ngde">Claim Access</strong> \u2014 Get individual claims with type safety</li><li class="ngde"><strong class="ngde">Validity Checks</strong> \u2014 Check expiration, not-yet-valid, and overall validity</li><li class="ngde"><strong class="ngde">Configurable Token Source</strong> \u2014 Provide custom <code class="ngde">tokenGetter</code> function</li><li class="ngde"><strong class="ngde">Error Handling</strong> \u2014 Clear errors for missing, malformed, or invalid tokens</li></ul><hr class="ngde"><h2 id="installation" href="services/jwt" headinglink="true" class="ngde">Installation<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="installation"></ng-doc-heading-anchor></h2><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">import</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> { JwtService</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> provideJwtService } </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">from</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'ngx-oneforall/services/jwt'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span></code></pre><hr class="ngde"><h2 id="basic-usage" href="services/jwt" headinglink="true" class="ngde">Basic Usage<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="basic-usage"></ng-doc-heading-anchor></h2><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">import</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> { Component</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> inject } </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">from</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> '@angular/core'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">import</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> { JwtService</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> provideJwtService } </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">from</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'ngx-oneforall/services/jwt'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E6B673" class="ngde">@</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">Component</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">({</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  selector</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'app-demo'</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  template</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> \`&#x3C;p>Token valid: &#x3C;/p>\`</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  providers</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> [</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">    provideJwtService</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">({</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">      tokenGetter</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> () </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">=></span><span style="color:#24292E;--shiki-dark:#E6B673" class="ngde"> localStorage</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">getItem</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde">'access_token'</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">) </span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">??</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> ''</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    })</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  ]</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">,</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">})</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">export</span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde"> class</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde"> DemoComponent</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">  private</span><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde"> jwt</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde"> inject</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(JwtService)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  isValid</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#005CC5;--shiki-dark:#39BAE6;font-style:inherit;--shiki-dark-font-style:italic" class="ngde"> this</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">jwt</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">isValid</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">()</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">}</span></span></code></pre><hr class="ngde"><h2 id="api-reference" href="services/jwt" headinglink="true" class="ngde">API Reference<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="api-reference"></ng-doc-heading-anchor></h2><div class="ng-doc-table-wrapper ngde"><table class="ngde"><thead class="ngde"><tr class="ngde"><th class="ngde">Method</th><th class="ngde">Returns</th><th class="ngde">Description</th></tr></thead><tbody class="ngde"><tr class="ngde"><td class="ngde"><code class="ngde">decodeHeader&#x3C;T>(token?)</code></td><td class="ngde"><code class="ngde">T</code></td><td class="ngde">Decode and return JWT header</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">decodeBody&#x3C;T>(token?)</code></td><td class="ngde"><code class="ngde">T</code></td><td class="ngde">Decode and return JWT payload</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">getClaim&#x3C;T>(claim, token?)</code></td><td class="ngde"><code class="ngde">T | undefined</code></td><td class="ngde">Get specific claim value</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">getExpirationDate(token?)</code></td><td class="ngde"><code class="ngde">Date | null</code></td><td class="ngde">Get <code class="ngde">exp</code> claim as Date</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">getIssuedAtDate(token?)</code></td><td class="ngde"><code class="ngde">Date | null</code></td><td class="ngde">Get <code class="ngde">iat</code> claim as Date</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">isExpired(token?, offset?)</code></td><td class="ngde"><code class="ngde">boolean</code></td><td class="ngde">Check if token is expired</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">isNotYetValid(token?)</code></td><td class="ngde"><code class="ngde">boolean</code></td><td class="ngde">Check <code class="ngde">nbf</code> claim</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">isValid(token?, offset?)</code></td><td class="ngde"><code class="ngde">boolean</code></td><td class="ngde">Check structure + expiration + nbf</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">getTimeUntilExpiration(token?)</code></td><td class="ngde"><code class="ngde">number | null</code></td><td class="ngde">Milliseconds until expiration</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">getToken()</code></td><td class="ngde"><code class="ngde">string</code></td><td class="ngde">Get token from tokenGetter</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">getConfig()</code></td><td class="ngde"><code class="ngde">JwtOptions</code></td><td class="ngde">Get service configuration</td></tr></tbody></table></div><hr class="ngde"><h2 id="configuration" href="services/jwt" headinglink="true" class="ngde">Configuration<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="configuration"></ng-doc-heading-anchor></h2><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">interface</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde"> JwtOptions</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> {</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">  tokenGetter</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> () </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">=></span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde"> string</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> |</span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde"> null</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  authScheme</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde"> string</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span><span style="color:#6A737D;--shiki-dark:#ACB6BF8C;font-style:inherit;--shiki-dark-font-style:italic" class="ngde">           // Default: 'Bearer '</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  headerName</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde"> string</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span><span style="color:#6A737D;--shiki-dark:#ACB6BF8C;font-style:inherit;--shiki-dark-font-style:italic" class="ngde">           // Default: 'Authorization'</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  errorOnNoToken</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde"> boolean</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  skipAddingIfExpired</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde"> boolean</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  allowedDomains</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> (</span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde">string</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> |</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde"> RegExp</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">)[]</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  skipUrls</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> (</span><span style="color:#005CC5;--shiki-dark:#39BAE6" class="ngde">string</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> |</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde"> RegExp</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">)[]</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#E36209;--shiki-dark:#BFBDB6" class="ngde">  refreshTokenHandler</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">?:</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde"> RefreshTokenHandler</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">}</span></span></code></pre><hr class="ngde"><h2 id="auth-guard-example" href="services/jwt" headinglink="true" class="ngde">Auth Guard Example<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="auth-guard-example"></ng-doc-heading-anchor></h2><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">export</span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde"> const</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde"> authGuard</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">:</span><span style="color:#6F42C1;--shiki-dark:#59C2FF" class="ngde"> CanActivateFn</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> () </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">=></span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">  const</span><span style="color:#005CC5;--shiki-dark:#BFBDB6" class="ngde"> jwt</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde"> inject</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(JwtService)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">  const</span><span style="color:#005CC5;--shiki-dark:#BFBDB6" class="ngde"> router</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde"> =</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde"> inject</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(Router)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">  if</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> (jwt</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">isExpired</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">()) {</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">    router</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">navigateByUrl</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde">'/login'</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">)</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">    return</span><span style="color:#005CC5;--shiki-dark:#D2A6FF" class="ngde"> false</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  }</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">  return</span><span style="color:#005CC5;--shiki-dark:#D2A6FF" class="ngde"> true</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">}</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span></code></pre><hr class="ngde"><h2 id="ssr-considerations" href="services/jwt" headinglink="true" class="ngde">SSR Considerations<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="ssr-considerations"></ng-doc-heading-anchor></h2><ng-doc-blockquote type="note" class="ngde"><p class="ngde">The service itself is SSR-safe, but your <code class="ngde">tokenGetter</code> must handle server environments:</p></ng-doc-blockquote><pre class="shiki shiki-themes github-light ayu-dark" style="background-color:#fff;--shiki-dark-bg:#0b0e14;color:#24292e;--shiki-dark:#bfbdb6" tabindex="0"><code class="language-typescript"><span class="line"><span style="color:#6A737D;--shiki-dark:#ACB6BF8C;font-style:inherit;--shiki-dark-font-style:italic" class="ngde">// \u2705 SSR-safe tokenGetter</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">provideJwtService</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">({</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">  tokenGetter</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> () </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">=></span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> {</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">    if</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> (</span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">typeof</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> localStorage </span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">===</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> 'undefined'</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">) </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">return</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> ''</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">    return</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> localStorage</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">getItem</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde">'token'</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">) </span><span style="color:#D73A49;--shiki-dark:#F29668" class="ngde">??</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde"> ''</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">  }</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#ACB6BF8C;font-style:inherit;--shiki-dark-font-style:italic" class="ngde">// \u2705 Better: Use cookies (available on server)</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">provideJwtService</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">({</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">  tokenGetter</span><span style="color:#24292E;--shiki-dark:#BFBDB6B3" class="ngde">:</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> () </span><span style="color:#D73A49;--shiki-dark:#FF8F40" class="ngde">=></span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde"> cookieService</span><span style="color:#24292E;--shiki-dark:#F29668" class="ngde">.</span><span style="color:#6F42C1;--shiki-dark:#FFB454" class="ngde">get</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">(</span><span style="color:#032F62;--shiki-dark:#AAD94C" class="ngde">'access_token'</span><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#BFBDB6" class="ngde">})</span></span></code></pre><hr class="ngde"><h2 id="error-handling" href="services/jwt" headinglink="true" class="ngde">Error Handling<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="error-handling"></ng-doc-heading-anchor></h2><p class="ngde">The service throws descriptive errors:</p><div class="ng-doc-table-wrapper ngde"><table class="ngde"><thead class="ngde"><tr class="ngde"><th class="ngde">Error</th><th class="ngde">Cause</th></tr></thead><tbody class="ngde"><tr class="ngde"><td class="ngde"><code class="ngde">'Token is missing.'</code></td><td class="ngde">Empty token from <code class="ngde">tokenGetter</code></td></tr><tr class="ngde"><td class="ngde"><code class="ngde">'Token is not a valid JWT.'</code></td><td class="ngde">Token doesn't have 3 dot-separated parts</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">'Failed to decode JWT header.'</code></td><td class="ngde">Invalid base64 or JSON in header</td></tr><tr class="ngde"><td class="ngde"><code class="ngde">'Failed to decode JWT payload.'</code></td><td class="ngde">Invalid base64 or JSON in payload</td></tr></tbody></table></div><hr class="ngde"><h2 id="security-notes" href="services/jwt" headinglink="true" class="ngde">Security Notes<ng-doc-heading-anchor class="ng-doc-anchor ngde" anchor="security-notes"></ng-doc-heading-anchor></h2><ng-doc-blockquote type="warning" class="ngde"><p class="ngde">This service <strong class="ngde">does not verify JWT signatures</strong>. It only decodes and validates structure/claims. Signature verification should be done server-side.</p></ng-doc-blockquote>`,l=class a extends n{pageType="guide";pageContent=f;editSourceFileUrl="https://github.com/love1024/ngx-oneforall/edit/main/projects/ngx-oneforall-docs/src/app/categories/services/pages/jwt/index.md?message=docs(): describe your changes here...";viewSourceFileUrl="https://github.com/love1024/ngx-oneforall/blob/main/projects/ngx-oneforall-docs/src/app/categories/services/pages/jwt/index.md";page=s;demoAssets=h;constructor(){super()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=o({type:a,selectors:[["ng-doc-page-wfc2uqrp"]],features:[t([{provide:n,useExisting:a},k,s.providers??[]]),r],decls:1,vars:0,template:function(e,C){e&1&&i(0,"ng-doc-page")},dependencies:[p],encapsulation:2,changeDetection:0})},m=[c(d({},(0,B.isRoute)(s.route)?s.route:{}),{path:"",component:l,title:"Jwt"})],I=m;export{l as PageComponent,I as default};
