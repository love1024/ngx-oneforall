<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // This script handles GitHub Pages SPA 404 workaround.
      // It stores the original path and redirects to the root,
      // which then restores the path via the script in index.html.
      const pathSegmentsToKeep = 1; // Keep /ngx-oneforall
      const locationPath = window.location.pathname;
      const locationSegments = locationPath.split('/').filter(Boolean);

      // Build the redirect path
      const redirectPath =
        '/' + locationSegments.slice(0, pathSegmentsToKeep).join('/') + '/';

      // Store the full path in sessionStorage for index.html to pick up
      sessionStorage.setItem(
        'redirect',
        locationPath + window.location.search + window.location.hash
      );

      // Redirect to the root
      window.location.replace(redirectPath);
    </script>
  </head>
  <body>
    Redirecting...
  </body>
</html>
