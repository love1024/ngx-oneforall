import{a as S}from"./chunk-IGVPCNDZ.js";import{g as F}from"./chunk-Q4X26F3R.js";import{Fc as O,Ra as s,Wb as L,Y as y,_ as f,ia as w,rc as I,sa as M,x as A}from"./chunk-GNIWJDNQ.js";var v={title:"Pipes"},q=v;var R=class t{transform(e){if(!e)return"";let r=e instanceof F?e.errors:e;if(!r)return"";let i=Object.keys(r);return i.length>0?i[0]:""}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"firstErrorKey",type:t,pure:!0})};var C=class t{transform(e,r,...i){return e.apply(r,i)}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"memoize",type:t,pure:!0})};var D=class t{sanitizer=f(O);transform(e){if(e==null)return"";if(typeof e!="string")throw new Error("Value must be a string");return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"safeHtml",type:t,pure:!0})};var d=new y("TIME_AGO_PIPE_CLOCK"),T=new y("TIME_AGO_PIPE_LABELS"),G=t=>({provide:T,useValue:t()}),V=t=>({provide:d,useValue:{tick:t}});var l=60,g=l*60,u=g*24,x=u*7,P=u*30,b=u*365;function E(t){let e=Date.now();return Math.floor((e-t)/1e3)}function k(t){return{suffix:t?.suffix??"ago",prefix:t?.prefix??"",second:t?.second??"second",minute:t?.minute??"minute",hour:t?.hour??"hour",day:t?.day??"day",week:t?.week??"week",month:t?.month??"month",year:t?.year??"year",seconds:t?.seconds??"seconds",minutes:t?.minutes??"minutes",hours:t?.hours??"hours",days:t?.days??"days",weeks:t?.weeks??"weeks",months:t?.months??"months",years:t?.years??"years"}}var N={tick:t=>{let e=E(t),r=0;return e<l?r=1e3:e<g?r=l*1e3:e<u&&(r=g*1e3),A(r)}},$=k();var H=class t{cd=f(L);platformId=f(M);clock=f(d,{optional:!0})??N;labels=f(T,{optional:!0})??$;destroyRef=f(w);clockSubscription=null;transform(e,r=!0){let i=this.getTimestamp(e),o=E(i);return r&&I(this.platformId)&&this.startUpdateTimer(i),this.constructResponse(o)}startUpdateTimer(e){this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=null),this.clockSubscription=this.clock.tick(e).pipe(S(this.destroyRef)).subscribe(()=>{this.cd.markForCheck()})}constructResponse(e){let r=k(this.labels),i;e<l?i=[e,"second"]:e<g?i=[Math.floor(e/l),"minute"]:e<u?i=[Math.floor(e/g),"hour"]:e<x?i=[Math.floor(e/u),"day"]:e<P?i=[Math.floor(e/x),"week"]:e<b?i=[Math.floor(e/P),"month"]:i=[Math.floor(e/b),"year"];let[o,n]=i;return(o>1?`${r.prefix} ${o} ${r[n+"s"]} ${r.suffix}`:`${r.prefix} ${o} ${r[n]} ${r.suffix}`).trim()}getTimestamp(e){if(typeof e=="string"&&!isNaN(Date.parse(e)))return new Date(e).getTime();if(e instanceof Date)return e.getTime();throw new Error("Invalid date format")}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"timeAgo",type:t,pure:!1})};var z=class t{transform(e,r=100,i=!1,o="\u2026"){if(!e)return"";if(r<=0)return o;if(e.length<=r)return e;let n=e.slice(0,r);if(i){let a=n.lastIndexOf(" ");a>0?n=n.slice(0,a):n=""}return n?n+o:o}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"truncate",type:t,pure:!0})};var B=class t{transform(e,r,i,o=!0){let n=Number(e??0);if(!r)throw new Error("pluralize pipe requires at least a singular form");let a=r.trim(),m=i?i.trim():this.simplePluralize(a),h=n===1?a:m;return o?`${n} ${h}`:h}simplePluralize(e){if(!e)return e;let r=e.toLowerCase();return r.endsWith("s")||r.endsWith("x")||r.endsWith("z")||r.endsWith("ch")||r.endsWith("sh")?e+"es":r.endsWith("y")&&!"aeiou".includes(r[r.length-2])?e.slice(0,-1)+"ies":e+"s"}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"pluralize",type:t,pure:!0})};var j=["B","KB","MB","GB","TB","PB"],K=1024,W=class t{transform(e,r=2,i=j){if(e===""||e===null||e===void 0||isNaN(Number(e)))return`0 ${i[0]}`;let o=Number(e);if(o<0)return"-"+this.transform(Math.abs(o),r,i);if(o===0)return`0 ${i[0]}`;let n=Math.floor(Math.log(o)/Math.log(K)),a=Math.min(n,i.length-1),m=o/Math.pow(K,a);return`${r!==null&&r>=0?m.toFixed(r):m.toString()} ${i[a]}`}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"bytes",type:t,pure:!0})};var _=class t{transform(e,r,i=1){let o=e,n=r;n===void 0&&(n=o,o=0);let a=Math.abs(i);a===0&&(a=1);let m=[];if(n>o)for(let c=o;c<n;c+=a)m.push(c);else for(let c=o;c>n;c-=a)m.push(c);return m}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"range",type:t,pure:!0})};var U=class t{transform(e,...r){return typeof e!="function"?e:e(...r)}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"call",type:t,pure:!0})};var Y=class t{transform(e,r){if(!e||!r)return e||"";let i=this.escapeRegex(r),o=new RegExp(i,"gi");return e.replace(o,n=>`<mark>${n}</mark>`)}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=s({name:"highlightSearch",type:t,pure:!0})};export{q as a,R as b,C as c,D as d,G as e,V as f,H as g,z as h,B as i,W as j,_ as k,U as l,Y as m};
